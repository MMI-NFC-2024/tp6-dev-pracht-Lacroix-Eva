---
import PlotFigure from "../components/PlotFigure.astro";
import Layout from "../layouts/Layout.astro";
import * as Plot from "@observablehq/plot";
import penguins from "../assets/penguins.json";

// Obtenir les espèces uniques
const speciesList = [...new Set(penguins.map((p) => p.species))];
---

<Layout>
  <h1 class="text-3xl font-bold text-center text-purple-600 m-4">
    Penguins – Graphiques par espèce
  </h1>

  <div class="flex overflow-x-auto gap-6 p-6 snap-x snap-mandatory">
    {
      speciesList.map((species) => (
        <div class="min-w-[420px] snap-center border rounded-xl shadow-md bg-white p-4">
          <h2 class="text-center text-xl font-semibold text-pink-600 mb-2">
            {species}
          </h2>
          <PlotFigure
            options={{
              marks: [
                Plot.dot(
                  penguins.filter((p) => p.species === species),
                  {
                    x: "culmen_length_mm",
                    y: "culmen_depth_mm",
                    stroke: "species",
                  }
                ),
              ],
            }}
          />
        </div>
      ))
    }
  </div>
</Layout>
